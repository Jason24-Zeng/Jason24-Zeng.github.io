---
title: Instagram è§†é¢‘æŒ‚è½¦å•†å“
date: 2023-03-19 16:54:27
tags: 
- è§†é¢‘å•†å“ç›¸å…³æ€§
categories:
- Business MindMap
- Search
password: 0418
cover: /img/Instagram-è§†é¢‘æŒ‚è½¦å•†å“/entire_workflow.png
top_img: /img/Instagram-è§†é¢‘æŒ‚è½¦å•†å“/entire_workflow.png
---

# èƒŒæ™¯

## åŸºæœ¬èƒŒæ™¯

å½“å‰å¯¹TikTokè§†é¢‘å»ºè®¾äº†TTçƒ­é—¨è§†é¢‘ä¾›ç»™ã€TTè§†é¢‘å†…ç½®æŒ‚è½½å•†å“å…³ç³»ä¾›ç»™ã€TT sellerè§†é¢‘ä¾›ç»™ç­‰é¡¹ç›®ï¼Œå¯¹TikTokè§†é¢‘å·²æœ‰ç¨³å®šçš„å„æ–¹å¼ä¾›ç»™ï¼Œä¸ºäº†è¿›ä¸€æ­¥æå‡ç«™å†…å¸¦è´§è§†é¢‘ä¾›ç»™ï¼Œéœ€è¦å¼€è¾Ÿæ–°çš„ä¾›ç»™è§†é¢‘æºï¼Œæ ¹æ®äº§å“çš„é¢„ç ”ï¼Œé€‰å®šäº†Instagram APPï¼ˆç®€ç§°Insï¼‰ï¼Œå…·ä½“äº§å“é¢„ç ”åŠBRDï¼š [[BRD] Instagram è§†é¢‘çˆ¬å–éœ€æ±‚](https://docs.google.com/document/d/1bTo6msrqHpRuPj6WgcS_zEmzT44yT9VDOaF2GLxAaRw/edit#heading=h.6xkm8aap3tue) ã€‚

ç»è¿‡æ¢³ç†ï¼Œæ•´ä½“Insè§†é¢‘ä¾›ç»™æµç¨‹æ¦‚è²Œå’Œç›¸å…³å›¢é˜Ÿå¦‚ä¸‹ï¼š

1. ä¾›ç»™å›¢é˜Ÿï¼šæä¾›çˆ¬å–ä¿¡æ¯æ¥æºï¼Œä¾‹å¦‚ç›®æ ‡çˆ¬å–ç§å­

2. çˆ¬è™«å›¢é˜Ÿï¼šç ´è§£å’Œçˆ¬å–Insè§†é¢‘åŠç›¸å…³æ•°æ®

3. Searchå›¢é˜Ÿï¼šæä¾›åŠå®ç°è§†é¢‘-å•†å“åŒ¹é…æ–¹æ¡ˆ

4. MMUå›¢é˜Ÿï¼šæä¾›å•†å“å…³é”®æˆªå¸§åŠå•†å“æ£€æµ‹èƒ½åŠ›

5. ä¸»ç«™æœç´¢å›¢é˜Ÿï¼šæä¾›ä»¥å›¾æœå•†å“èƒ½åŠ›

6. video coreï¼šè§†é¢‘å‘å¸ƒ

7. è§†é¢‘Search&RCMDï¼šå†…å®¹åˆ†å‘

å¦é™„ï¼š[Searchä¾§éœ€æ±‚PRD](https://confluence.shopee.io/pages/viewpage.action?pageId=1618316343)

## Insè§†é¢‘æ•°æ®æ‘¸åº•

### çˆ¬å–ç§å­é€‰å–

æ ¹æ®è°ƒç ”ï¼ŒInsçš„æœç´¢èƒ½åŠ›è¾ƒå·®ï¼Œåªèƒ½é€šè¿‡æœç´¢hashtagæˆ–ä½œè€…åå®ç°æ£€ç´¢ï¼Œä¸”æ£€ç´¢ç»“æœæ›´å¤šçš„æ˜¯æŒ‰ç…§æ—¶é—´æ’åºï¼Œç›¸å…³æ€§æ’åºå› å­è¾ƒå¼±ã€‚

ç›®å‰é€šè¿‡ç”µå•†å¼ºç›¸å…³çš„hashtagè¿›è¡ŒInsæ£€ç´¢ï¼Œçˆ¬å–çš„è§†é¢‘ç›¸å¯¹å¥½ä¸€äº›ã€‚ç›®å‰å½“å‰äººå·¥æ‰¾äº†57ä¸ªhashtagï¼Œåç»­æ­£å¼çˆ¬å–hashtagä¼šæ‰©å……åˆ°100+ä¸ªå·¦å³ï¼Œæ‰©å±•è¿‡ç¨‹ä¸­ï¼Œæ‰¾hashtagçš„é€»è¾‘è·Ÿç€57ä¸ªé€»è¾‘æ˜¯ä¸€æ ·çš„ï¼Œä¸»è¦æ˜¯æ‰¾ç”µå•†å¼ºç›¸å…³hashtagï¼Œä¾‹å¦‚ï¼štas wanitaï¼ˆå¥³åŒ…ï¼‰ã€dapurï¼ˆå¨æˆ¿å¥½ç‰©ï¼‰ã€Main ananakï¼ˆå„¿ç«¥ç©å…·ï¼‰ç­‰ã€‚

äº§å“æ¢³ç†çš„hashtagåˆ—è¡¨ï¼š [inså°å°¼#æœç´¢ç»“æœ](https://docs.google.com/spreadsheets/d/1o64Koqk8H4_OditjSkHBNyDvZN1C3RTZO3SuJgiUb_Q/edit#gid=0)

### çˆ¬å–è§†é¢‘åˆæ­¥è°ƒç ”

çˆ¬è™«å›¢é˜Ÿæ ¹æ®å·²æœ‰çš„ 57 ä¸ªhashtagï¼Œçˆ¬å–äº† 6000 æ¡è§†é¢‘ï¼ˆhashtagç§å­å¹¶å‘çˆ¬å–ï¼Œå¯ä»¥å¤§æ¦‚è®¤ä¸ºè¿™ 6000 è§†é¢‘æ˜¯éšæœºä» 57 ä¸ªhashtagçˆ¬çš„ï¼‰ï¼Œä» 6000 æ¡è§†é¢‘ä¸­éšæœºæŠ½äº† 100 æ¡è§†é¢‘åšäº†äººå·¥reviewï¼Œæœ‰å¸¦è´§å€¾å‘çš„è§†é¢‘æœ‰ 72%ï¼Œ20% è§†é¢‘ä¸å•†å“æ— å…³ï¼Œ8% è§†é¢‘é“¾æ¥æ— æ³•æ‰“å¼€ã€‚

### çˆ¬å–å•†å“ä¿¡æ¯æƒ…å†µ

TikTok è§†é¢‘çˆ¬å–å„é¡¹ç›®ä¸­ï¼Œä¼šé€šè¿‡**å„ç§çˆ¬å–ä¿¡æ¯ç ´è§£æ‰‹æ®µ**æ‰¾åˆ°è§†é¢‘é‡Œç›¸å…³å•†å“çš„ä¿¡æ¯ï¼Œä½†Instagram è§†é¢‘å¹¶æ— å¸¦è´§æŒ‚è½¦åŠŸèƒ½ï¼Œç»è¿‡çˆ¬è™«å›¢é˜Ÿè°ƒç ”ï¼Œæ— æ³•ç»™å‡ºè§†é¢‘ä¸­çš„å•†å“ç›¸å…³ä¿¡æ¯ã€‚

å¯¹äº Instagram è§†é¢‘çš„å•†å“åŒ¹é…ï¼Œåªèƒ½é€šè¿‡å…¨åº“æ£€ç´¢åŠåŒ¹é…æ–¹å¼å®Œæˆï¼Œè€Œè¿™ç§æ–¹å¼æ˜¯ç›®å‰åŒ¹é…æ–¹å¼ä¸­éš¾åº¦æœ€å¤§çš„ä¸€ç§ã€‚

### é¡¹ç›®åˆæ­¥ç›®æ ‡

æ ¹æ® Supply éœ€æ±‚å’Œè§†é¢‘çˆ¬å–æƒ…å†µï¼Œé¡¹ç›®æœ¬ Q ç›®æ ‡ä¸ºæ¯å¤©ä¾›ç»™ 1k~2k å¸¦è´§è§†é¢‘ã€‚

## åŸºæœ¬ç»“æ„

è¿™é‡Œæˆ‘ä»¬é›†ä¸­è®¨è®ºè§†é¢‘-å•†å“åŒ¹é…æ–¹æ¡ˆçš„è®¾è®¡ã€‚

ä¸»è¦åˆ†ä¸‹é¢å‡ éƒ¨åˆ†ï¼š

äºŒã€ä¾èµ–èƒ½åŠ›æ¢³ç†

ä¸‰ã€è§†é¢‘-å•†å“åŒ¹é…æ–¹æ¡ˆ

å››ã€æµç¨‹æ•°æ®ä¾èµ–ä¸è¾“å‡º

# ä¾èµ–èƒ½åŠ›æ¢³ç†

æœ¬ç« æ¢³ç†äº†å¯ä»¥ä¾èµ–çš„ç›¸å…³èƒ½åŠ›ï¼Œå¹¶å¯¹å½“å‰å·²å¯ç”¨çš„èƒ½åŠ›åšåˆæ­¥æ•ˆæœæ‘¸åº•ã€‚æœª ready èƒ½åŠ›éœ€ç­‰èƒ½åŠ›æä¾›æ–¹ ready åæ¥å…¥æ•´ä½“æµç¨‹å†çœ‹æ•ˆæœã€‚

å¤ç”¨ç¬¬ä¸€ç« çš„ 2.2 éƒ¨åˆ†çš„ 100 ä¸ªcaseï¼Œå»æ‰ä¸é£Ÿå“ç›¸å…³è§†é¢‘ï¼ˆå¯é€šè¿‡ hashtag è¿‡æ»¤æ‰ï¼‰å’Œæ— æ³•æ’­æ”¾è§†é¢‘ï¼Œå‰©ä¸‹ 86 ä¸ªè§†é¢‘ã€‚ä¸‹é¢å·²æœ‰èƒ½åŠ›é€šè¿‡è·‘è¿™ 86 ä¸ªcaseï¼ˆä¸‹é¢ç®€ç§° â€œè°ƒç ” caseâ€ï¼‰èƒ½åŠ›å¾—åˆ†åŠç»“åˆäººå·¥æ ‡æ³¨ï¼Œåšä¸‹èƒ½åŠ›ä»‹ç»å’Œåˆæ­¥çš„èƒ½åŠ›æ‘¸åº•ã€‚

## è§†é¢‘æ£€ç´¢å•†å“æœåŠ¡

Searchç»„å†…ä¹‹å‰å»ºè®¾è¿‡ä¸€ä¸ªè§†é¢‘-å•†å“æ£€ç´¢çš„æœåŠ¡ï¼Œé€šè¿‡è§†é¢‘å¯¹å•†å“åº“ä¸­å•†å“åšæ£€ç´¢ï¼Œç›®å‰è¯¥æœåŠ¡åº”ç”¨äºSellerè§†é¢‘åŒ¹é…é¡¹ç›®ï¼ˆé¡¹ç›®ä¸»é¡µï¼š[Sellerè§†é¢‘å•†å“æŒ‚è½½é¡¹ç›®](https://confluence.shopee.io/pages/viewpage.action?pageId=1439136118)ï¼‰ä¸­ï¼Œæ£€ç´¢æœåŠ¡é¡¹ç›®ä¸»é¡µï¼š[è§†é¢‘æ£€ç´¢å•†å“é¡¹ç›®](https://confluence.shopee.io/pages/viewpage.action?pageId=1235039010)ã€‚

å¯ä»¥é€šè¿‡è¯¥æœåŠ¡åšä¸€è·¯å•†å“å¬å›ã€‚

åœ¨è°ƒç ”caseä¸Šï¼ŒæœåŠ¡æ£€ç´¢åˆ†æ•°ä¸åŒé˜ˆå€¼ä¸‹ï¼Œç»“åˆäººå·¥æ ‡æ³¨ï¼Œè§†é¢‘-å•†å“ç›¸å…³æ€§è¡¨ç°å¦‚ä¸‹ï¼š

1. å½“ä¸è®¾é˜ˆå€¼æ—¶ï¼Œæœ‰ç»“æœç‡ï¼š100%ï¼Œtop1å‡†ç¡®ç‡ 25.6%ï¼ˆtop2ï¼š25.6%ï¼Œtop3ï¼š27.9%ï¼‰ã€‚

2. è®¾å®šé˜ˆå€¼ >0.4ï¼Œæœ‰ç»“æœç‡ï¼š83.7%ï¼Œtop1å‡†ç¡®ç‡ 30.6%ï¼ˆtop2ï¼š30.6%ï¼Œtop3ï¼š30.6%ï¼‰ã€‚

3. è®¾å®šé˜ˆå€¼ >0.5ï¼Œæœ‰ç»“æœç‡ï¼š60.5%ï¼Œtop1å‡†ç¡®ç‡ 38.5%ï¼ˆtop2ï¼š38.5%ï¼Œtop3ï¼š40.4%ï¼‰ã€‚

4. è®¾å®šé˜ˆå€¼ >0.6ï¼Œæœ‰ç»“æœç‡ï¼š23.3%ï¼Œtop1å‡†ç¡®ç‡ 55.0%ï¼ˆtop2ï¼š55.0%ï¼Œtop3ï¼š55.0%ï¼‰ã€‚ 

æ ¹æ®å‡†ç¡®ç‡å’Œæœ‰ç»“æœç‡æƒ…å†µï¼Œå°†è¯¥è·¯çº³å…¥å¬å›æ˜¯å¯è¡Œçš„ã€‚

è¯¥æ£€ç´¢æœåŠ¡å•†å“åº“èŒƒå›´æ˜¯ è®¢å• top200 ä¸‡å•†å“ + PV top200 ä¸‡å•†å“ï¼Œå»é‡åå¤§æ¦‚ 250~300ä¸‡ å•†å“ã€‚åœ¨æœªå¬å›ç»“æœçš„è§†é¢‘ä¸­ï¼ŒéšæœºæŠ½æ£€äº† 10 ä¸ªè§†é¢‘ï¼Œå‘ç°è§†é¢‘ä¸­å•†å“å‡æœªåœ¨å•†å“åº“ä¸­ã€‚

ä¸ºäº†å¯¹å¬å›å•†å“åšè¿›ä¸€æ­¥è¡¥å……ï¼Œä¼šåŠ å…¥ ä¸»ç«™ä»¥å›¾æœç´¢å•†å“ å’Œ mmu å•†å“æ£€æµ‹ ç­‰å¬å›èƒ½åŠ›ã€‚

## ä¸»ç«™ä»¥å›¾æœå•†å“æœåŠ¡

Shopee æ‰‹æœº APP ä¸Šæœ‰ä»¥å›¾æœå•†å“çš„åŠŸèƒ½ï¼Œæ ¹æ®ä¹‹å‰è¯•ç”¨ï¼Œèƒ½æœ‰æ¯”è¾ƒä¸é”™çš„æ•ˆæœï¼ŒæœŸæœ›èƒ½å¤Ÿåˆ©ç”¨æ­¤èƒ½åŠ›åˆ°Insé¡¹ç›®çˆ¬å–é¡¹ç›®ä¸­ã€‚

æ ¹æ®è°ƒç ”ï¼Œç›®å‰å¯ä»¥æ‹¿åˆ°çš„ä¸”å¯æ¯”è¾ƒå¥½ä»£è¡¨è§†é¢‘å•†å“çš„æ˜¯è§†é¢‘å°é¢å›¾ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸»ç«™ä»¥å›¾æœå•†å“æœåŠ¡ï¼Œå¯¹ video çš„å°é¢å›¾å‘èµ·å•†å“æ£€ç´¢ã€‚å•†å“åº“ä¸º ID åœ°åŒºå†å²æ€»é”€é‡ >0 çš„å•†å“ï¼Œåº“å¤§å°ä¸º 5000 ä¸‡å·¦å³ã€‚

ä»¥å›¾æœå•†å“è¿”å›å¾—åˆ†ä¸åŒé˜ˆå€¼ä¸‹ï¼Œç»“åˆäººå·¥æ ‡æ³¨ï¼Œè§†é¢‘-å•†å“ç›¸å…³æ€§è¡¨ç°å¦‚ä¸‹ï¼š

1. å½“ä¸è®¾é˜ˆå€¼æ—¶ï¼Œæœ‰ç»“æœç‡ï¼š100%ï¼Œtop1 å‡†ç¡®ç‡ 33.3%ï¼ˆtop2ï¼š35.9%ï¼Œtop3ï¼š35.9%ï¼‰ã€‚

2. è®¾å®šé˜ˆå€¼ >0.9ï¼Œæœ‰ç»“æœç‡ï¼š97.4%ï¼Œtop1 å‡†ç¡®ç‡ 34.2%ï¼ˆtop2ï¼š36.8%ï¼Œtop3ï¼š36.8%ï¼‰ã€‚

3. è®¾å®šé˜ˆå€¼ >0.92ï¼Œæœ‰ç»“æœç‡ï¼š69.2%ï¼Œtop1 å‡†ç¡®ç‡ 44.4%ï¼ˆtop2ï¼š46.3%ï¼Œtop3ï¼š46.3%ï¼‰ã€‚

4. è®¾å®šé˜ˆå€¼ >0.95ï¼Œæœ‰ç»“æœç‡ï¼š21.8%ï¼Œtop1 å‡†ç¡®ç‡ 76.5%ï¼ˆtop2ï¼š82.4%ï¼Œtop3ï¼š82.4%ï¼‰ã€‚ 

æ ¹æ®å‡†ç¡®ç‡å’Œæœ‰ç»“æœç‡æƒ…å†µï¼Œå°†è¯¥è·¯çº³å…¥å¬å›æ˜¯å¯è¡Œçš„ã€‚

å¦å¤–ï¼šåé¢ä¼šæ¥ MMU è§†é¢‘å•†å“å¸§è¯†åˆ«æœåŠ¡ï¼Œä¼šç”¨è¯†åˆ«å‡ºçš„å¸¦å•†å“çš„å¸§å›¾å†æ¬¡è¿‡ä¸»ç«™ä»¥å›¾æœå•†å“çš„æœåŠ¡ï¼Œä½œä¸ºå¦å¤–ä¸€è·¯å¬å›ã€‚

## MMU è§†é¢‘å•†å“å¸§è¯†åˆ«åŠå•†å“è¯†åˆ«æœåŠ¡

[MMU-è§†é¢‘å•†å“å…³é”®å¸§æ£€æµ‹ä¸å•†å“è¯†åˆ«TD](https://docs.google.com/document/d/1GkUXBaMqUO54YxusUoMZkjNDTMgc_6RkN_rzyGJvuZI/edit#)

## å°é»„è½¦è§†é¢‘-å•†å“ç›¸å…³æ€§æœåŠ¡

æœ‰å„è·¯å¬å›çš„ item åï¼Œå¯ä»¥è°ƒç”¨ è§†é¢‘ - å•†å“ ç›¸å…³æ€§æœåŠ¡ï¼Œå¾—åˆ°ç»Ÿä¸€å¯æ¯”çš„ item ç›¸å…³æ€§åˆ†æ•°ã€‚

å°é»„è½¦ è§†é¢‘-å•†å“ ç›¸å…³æ€§ä¸‰æœŸé¡¹ç›®è¯¦è§ï¼š[è§†é¢‘-å•†å“ç›¸å…³æ€§ä¸‰æœŸ](https://confluence.shopee.io/pages/viewpage.action?pageId=1446387013)ã€‚

è°ƒç ”æœŸé—´ï¼Œæœ‰ä¸¤è·¯å¯ç”¨å¬å›ï¼š1. è§†é¢‘æ£€ç´¢å•†å“æœåŠ¡å¬å›ï¼Œ2. ä¸»ç«™ä»¥å›¾æœå•†å“æœåŠ¡å¬å›ã€‚

åªæ˜¯ç”¨ 1. è§†é¢‘æ£€ç´¢å•†å“æœåŠ¡å¬å›æ—¶ï¼Œå¬å› itemè®¡ç®—å°é»„è½¦è§†é¢‘-å•†å“ç›¸å…³æ€§åˆ†æ•°ï¼Œç»“åˆäººå·¥æ ‡æ³¨æ•ˆæœå¦‚ä¸‹ï¼š

1. ä¸è®¾é˜ˆå€¼ï¼Œæœ‰ç»“æœç‡ï¼š100%ï¼Œå‡†ç¡®ç‡ï¼š29.1%ã€‚

2. è®¾ç½®é˜ˆå€¼ >0.65ï¼Œæœ‰ç»“æœç‡ï¼š45.3%ï¼Œå‡†ç¡®ç‡ï¼š53.8%ã€‚

3. è®¾ç½®é˜ˆå€¼ >0.7ï¼Œæœ‰ç»“æœç‡ï¼š27.9%ï¼Œå‡†ç¡®ç‡ï¼š79.2%ã€‚

4. è®¾ç½®é˜ˆå€¼ >0.75ï¼Œæœ‰ç»“æœç‡ï¼š16.3%ï¼Œå‡†ç¡®ç‡ï¼š100%ã€‚

ä½¿ç”¨ 1. è§†é¢‘æ£€ç´¢å•†å“æœåŠ¡å¬å› + 2. ä¸»ç«™ä»¥å›¾æœå•†å“æœåŠ¡å¬å› ç»“æœå–å¹¶ï¼Œå¹¶è¿‡å°é»„è½¦æœåŠ¡ï¼š

1. ä¸è®¾é˜ˆå€¼ï¼Œæœ‰ç»“æœç‡ï¼š100%ï¼Œå‡†ç¡®ç‡ï¼š44.2%ã€‚

2. è®¾ç½®é˜ˆå€¼ >0.65ï¼Œæœ‰ç»“æœç‡ï¼š60.5%ï¼Œå‡†ç¡®ç‡ï¼š63.5%ã€‚

3. è®¾ç½®é˜ˆå€¼ >0.7ï¼Œæœ‰ç»“æœç‡ï¼š37.2%ï¼Œå‡†ç¡®ç‡ï¼š81.2%ã€‚

4. è®¾ç½®é˜ˆå€¼ >0.75ï¼Œæœ‰ç»“æœç‡ï¼š23.3%ï¼Œå‡†ç¡®ç‡ï¼š100%ã€‚

å¯ä»¥çœ‹å‡ºï¼Œç”±äºé è°±çš„å¬å›ç»“æœå¢å¤šï¼Œç¬¬2è·¯å¬å›åœ¨æœ‰ç»“æœç‡å’Œå‡†ç¡®ç‡ä¸Šå‡æœ‰æ­£å‘è¡¥å……ã€‚

# è§†é¢‘-å•†å“åŒ¹é…æ–¹æ¡ˆ

## ä¸Šä¸‹æ¸¸æ€»ä½“ç»“æ„

æ•´ä½“æµç¨‹åˆ†ä¸ºçˆ¬è™«å›¢é˜Ÿçˆ¬å– Ins è§†é¢‘ï¼Œå‘é€ç»™ Search ä¾§åšåŒ¹é…ï¼ŒåŒ¹é…å®Œå Search ä¾§å°†ç»“æœå†™å…¥çˆ¬è™«æ•°æ®æ¥æ”¶ kafkaã€‚

å…¶ä¸­ Search å†…éƒ¨éœ€è¦å¯¹çˆ¬å–è§†é¢‘åšè§¦å‘ç‰¹å¾è®¡ç®—å¹¶å­˜ kafkaï¼Œä¾èµ–çš„ MMU è§†é¢‘å¸§è¯†&å•†å“è¯†åˆ«æ¨¡å—ç”±å¼‚æ­¥æ¶ˆè´¹ä¸Šé¢ kafka æ–¹å¼ç»™å‡ºç»“æœåˆ°å¦å¤–ä¸€ä¸ª kafkaï¼Œæœ€ç»ˆ Search ALG ä¾§ä» kafka å–å‡ºæ•°æ®åšåç»­åŒ¹é…ã€‚

è¯¥æµç¨‹å®šæ—¶æ¯å¤©è¿è¡Œï¼Œæ¶ˆè´¹ kafka ä¸­ä¹‹å‰æ²¡æœ‰æ¶ˆè´¹çš„æ‰€æœ‰ msgã€‚

å…·ä½“å¤§å—çš„å„å·¥ç¨‹å›¢é˜Ÿé…åˆå¦‚ä¸‹æµç¨‹ï¼š

![æ•´ä½“æµç¨‹](https://jason24-zeng.github.io/img/Instagram-è§†é¢‘æŒ‚è½¦å•†å“/entire_workflow.png)

## åŒ¹é…æµç¨‹

ä¸Šå›¾ä¸­ç®—æ³•åŒ¹é…é€»è¾‘æ¨¡å—åŒ…å«4è·¯å¬å›åŠå•†å“æ’åºé€‰æ‹©æµç¨‹ï¼Œå…·ä½“æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![ç®—æ³•åŒ¹é…æµç¨‹](https://jason24-zeng.github.io/img/Instagram-è§†é¢‘æŒ‚è½¦å•†å“/search_workflow.png)

## å•†å“ç›¸å…³æ€§æ’åº

å„è·¯å¬å›å•†å“é›†åï¼Œéœ€è¦å¯¹å•†å“åšç»¼åˆæ’åºï¼Œæœ€ç»ˆé€‰å‡ºç›¸å…³å•†å“ï¼Œå¹¶åšè§†é¢‘-å•†å“å…³è”å…³ç³»è¾“å‡ºã€‚

ç›®å‰æœ¬é¡¹ç›®è¦æ±‚ä¸€ä¸ªè§†é¢‘åªæŒ‚ä¸€ä¸ªå•†å“ã€‚ï¼ˆè°ƒç ”äº†100ä¸ªInsè§†é¢‘ï¼Œ90%å·¦å³çš„è§†é¢‘åªä¸»å–ä¸€ç§å•†å“ã€‚ï¼‰

### è§„åˆ™æ’åº

æ‹¿åˆ°å¬å›å•†å“é›†åï¼Œä¼šå¯¹æ¯ä¸ªå•†å“è°ƒç”¨è§†é¢‘ç›¸å…³æ€§æ¨¡å‹ï¼ˆå°é»„è½¦æœåŠ¡ï¼‰ï¼Œå¾—åˆ°å•†å“è·Ÿå½“å‰è§†é¢‘çš„ç›¸å…³æ€§åˆ†æ•°ï¼Œé™¤æ­¤ä»¥å¤–ï¼Œä¹Ÿä¼šåˆ©ç”¨å„å¬å›è·¯ç»™å‡ºçš„åˆ†æ•°å‚ä¸æ’åºã€‚

ç”±äºå„è·¯å¬å›æ¥è‡ªä¸åŒæ£€ç´¢æœåŠ¡ï¼Œå…¶è¿”å›ç»“æœåˆ†æ•°ä¹‹å‰æ²¡æœ‰å¯æ¯”æ€§ï¼Œä¸ºäº†æ›´åŠ å¯æ§é¡¹ç›®åˆæœŸä½¿ç”¨è§„åˆ™èåˆå…¬å¼å¯¹å•†å“è¿›è¡Œæ’åºã€‚

èåˆå…¬å¼ä¸»ä½“é‡‡ç”¨çº¿æ€§åŠ æƒï¼Œä½†ç”±äºæ¯è·¯å¬å›åªæœ‰è‡ªå·±è·¯æœåŠ¡çš„åˆ†æ•°å¹¶ä¸å¯æ¯”ï¼Œæ‰€ä»¥é€šè¿‡åˆ†æ®µåŠ æƒæ–¹å¼å°†itemåˆ†æ•°åšèåˆã€‚

å®šä¹‰ï¼š

1. `l2_pair_rel_score`ï¼šå°é»„è½¦æœåŠ¡åˆ†æ•°

2. `recall_search_score`ï¼šSearchè§†é¢‘æ£€ç´¢å•†å“å¾—åˆ†

3. `recall_cover_score`ï¼šè§†é¢‘å°å›¾ä¸»ç«™æ£€ç´¢å•†å“å¾—åˆ†

4. `recall_frames_score`ï¼šè§†é¢‘æˆªå¸§ä¸»ç«™æ£€ç´¢å•†å“å¾—åˆ†

5. `recall_videommu_score`ï¼šè§†é¢‘å†…å®¹æ£€æµ‹å•†å“å¾—åˆ†

6. `weight{*}`ï¼šå„å› å­å‚æ•°

7. `threshold{*}`ï¼šå„å› å­é˜ˆå€¼

å…¬å¼ï¼š

```cpp
final_score = weight1 * l2_pair_rel_score + weight2 * recall_score_boost

recall_score_boost = weight11 * recall_search_norm + weight12 * recall_cover_norm + weight13 * recall_frames_norm + weight14 * recall_videommu_norm

recall_search_norm = 1.0 if recall_search_score > threshold1 else 0.1

recall_cover_norm = 1.0 if recall_cover_score > threshold2 else 0.1

recall_frames_norm = 1.0 if recall_frames_score > threshold3 else 0.1

recall_videommu_norm = 1.0 if recall_videommu_score > threshold4 else 0.1
```

### æ¨¡å‹æ’åº

ç¬¬ä¸€ä¸ªç‰ˆæœ¬ä¸Šçº¿åï¼Œé¡¹ç›®äº§å‡ºçš„ç»“æœæ•°æ®ä¼šè¿‡ QC äººå®¡ï¼Œæ ¹æ®äººå®¡ label ä½œä¸º labelï¼Œå¯ä»¥å°è¯•åšèåˆå…¬å¼çš„å‚æ•°æ¨¡å‹åŒ–ã€‚

ä¸Šé¢æ¥ä»‹ç»åˆ°ï¼Œå„è·¯å¬å›ç»“æœåˆ†æ•°ä¹‹é—´ä¸å¯æ¯”ä¸”éœ€è¦éçº¿æ€§æ‹Ÿåˆï¼Œå¤–åŠ ä¸Šå…¶ä»–ä¸€äº›ç‰¹å¾ï¼Œé€‰æ‹©å†³ç­–æ ‘æ¨¡å‹ï¼ˆä¾‹å¦‚ XGBoostã€LightGBM ç­‰ï¼‰è¾ƒä¸ºåˆé€‚ã€‚

ç”±äºç¬¬ä¸€ç‰ˆä¸Šçº¿å‰æ²¡æœ‰è¯¥é€šè·¯çš„å®¡æ ¸ç»“æœå’Œæ ·æœ¬ï¼Œä¸”ä¸ºäº†å‰æœŸé«˜å¯è§£é‡Šæ€§ä»¥åŠæ–¹ä¾¿è°ƒæ•´æ•ˆæœï¼Œæš‚ä¸ç”¨æ¨¡å‹åšåˆ†æ•°èåˆï¼Œè¿™é‡Œæš‚æ—¶ä¸åšå±•å¼€ã€‚

# æµç¨‹æ•°æ®è¾“å…¥ä¸è¾“å‡º

æ•´ä¸ªæµç¨‹ä¸ºçˆ¬è™«ç»™åˆ°å¾…åŒ¹é…è§†é¢‘ä¿¡æ¯ï¼ŒSearchä¾§è¿”å›è§†é¢‘-å•†å“å…³è”ä¿¡æ¯ã€‚æ•´ä¸ªæµç¨‹é€šè¿‡kafkaäº¤äº’ã€‚

ä¸‹é¢æ˜¯çˆ¬è™«ä¾§è¾“å…¥æ•°æ®å’ŒSearchè¿”å›çš„æ•°æ®ã€‚æ•°æ®å‡ä¸ºjsonå­—ç¬¦ä¸²ã€‚

## è¾“å…¥

è¾“å…¥kafkaæ¶ˆæ¯ä¸ºjsonå­—ç¬¦ä¸²ï¼Œè§£å¼€ä¸ºdictç»“æ„ï¼Œå­—æ®µå¯ä»¥å‚ç…§ä¸‹é¢ç¤ºä¾‹ï¼š

```json
{
  "aid": "CfWXG0jjcn3",
  "author_id": "9528671315",
  "bit_rate": 1687842,
  "caption": "#longtunikjumbo #longtunikmurah #mididress #tunikmurah #tunikjumbo #tunikhijab #tunikcantik #tunikbigsize #tunikkekinian #tunikmuslimah #tunikkatun #pakaianmuslimah #pakaianwanita #pakaianmurah #bajumuslimah #bajuwanita",
  "cover_image_mms_url": "http://img.sp.mms.shopee.sg/sg-11134113-23020-9b08pg4hdxnv58",
  "ctime": 1677233454,
  "detect_lang": "id",
  "duration": 14200,
  "hashtag": "pakaianmurah",
  "height": 1280,
  "id": 5656,
  "job_id": "20230224120004yQuLlC",
  "keyword": "",
  "l1_topic": "Beauty & Fashion",
  "l2_topic": "Dressing Outfits",
  "last_modify_time": 1656420248,
  "mms_url": "https://vod.sp-cdn.shopee.com/c3/98934353/122/A3oyOcvkAOj54QkaEdsIACY.mp4",
  "mms_vid": "sg_2bae65b8-ec69-471c-8b4f-258d77f7989b_000345",
  "mmu_item_image_list": [
    {
      "idx": 10,
      "score": 1,
      "url": "http://proxy.uss.sz.shopee.io/api/v4/11110901/mms/sg-11110901-23020-e918gf2hdxnv2e_sprite1x1-51"
    },
    {
      "idx": 3,
      "score": 1,
      "url": "http://proxy.uss.sz.shopee.io/api/v4/11110901/mms/sg-11110901-23020-e918gf2hdxnv2e_sprite1x1-16"
    },
    {
      "idx": 12,
      "score": 1,
      "url": "http://proxy.uss.sz.shopee.io/api/v4/11110901/mms/sg-11110901-23020-e918gf2hdxnv2e_sprite1x1-61"
    },
    {
      "idx": 14,
      "score": 1,
      "url": "http://proxy.uss.sz.shopee.io/api/v4/11110901/mms/sg-11110901-23020-e918gf2hdxnv2e_sprite1x1-71"
    },
    {
      "idx": 13,
      "score": 1,
      "url": "http://proxy.uss.sz.shopee.io/api/v4/11110901/mms/sg-11110901-23020-e918gf2hdxnv2e_sprite1x1-66"
    }
  ],
  "mmu_item_list": [
    {
      "item_id": 10875013561,
      "score": 0.830738215
    },
    {
      "item_id": 13170765111,
      "score": 0.806216715
    },
    {
      "item_id": 10390521602,
      "score": 0.80292648
    },
    {
      "item_id": 16583890561,
      "score": 0.80149953
    },
    {
      "item_id": 9973913969,
      "score": 0.801484525
    },
    {
      "item_id": 21443409208,
      "score": 0.799377265
    },
    {
      "item_id": 21018793542,
      "score": 0.795533015
    },
    {
      "item_id": 7965085370,
      "score": 0.7947649649999999
    },
    {
      "item_id": 21853369810,
      "score": 0.792521715
    },
    {
      "item_id": 12351221890,
      "score": 0.79030961
    }
  ],
  "mtime": 1677226180,
  "platform": 2,
  "play_cnt": 734,
  "rank": 0,
  "region": 1,
  "scenario": "INS_reels",
  "scores": "{\"third_party_pdp\":0.0000013471473,\"video_ppt_detect\":0.000100550096}",
  "state": 0,
  "task_id": "688",
  "vid": "CfWXG0jjcn3",
  "width": 720
}
```

å…¶ä¸­ï¼Œè¯¥é¡¹ç›® scenario æŒ‡å®šä¸º `INS_reels`ã€‚

## è¾“å‡º

```json
{
  "aid": "CoR8abxDCnE",
  "author_id": "51223614878",
  "bit_rate": 1580908,
  "caption": "#fixgurlssid \nğŸ¥ :\nâ€¢\nâ€¢\nâ€¢\n#hijaberstyle #hijabtrend #inspirasioutfit #inspirasioutfithijab #selebgramhits #hijabindo #selebgramhijab #hijabfashion #hijabers_indonesia #hijabtraveling #hijabstyle #outfitoftheday #ootdfashion #tutorialhijabmodern #hijabersindo #outfithijab #trendhijabootd #cantikberhijab #tutorialhijabpasmina #ootdhijabstyle #hijabtraveller #ootdhijabkece #tutorialhijab #tutorialhijabplisket #hijabfashion #ootdhijabindo #ootdhijab",
  "cover_image_mms_url": "http://img.sp.mms.shopee.sg/sg-11134113-23020-5x03xh081vnv5b",
  "ctime": 1677152282,
  "detect_lang": "en",
  "duration": 10233,
  "hashtag": "hijabers_indonesia",
  "height": 1024,
  "id": 729,
  "job_id": "20230223185622llfHzT",
  "keyword": "",
  "l1_topic": "Talent",
  "l2_topic": "Dance",
  "last_modify_time": 1675599446,
  "mms_url": "https://vod.sp-cdn.shopee.com/c3/98934353/122/A3oyOXd3AMRgQ=gZEeAKACY.mp4",
  "mms_vid": "sg_3e3bce99-eb4e-4479-937d-60a74df3a6d7_000345",
  "mmu_item_image_list": [
    {
      "idx": 4,
      "score": 1,
      "url": "http://proxy.uss.sz.shopee.io/api/v4/11110901/mms/sg-11110901-23020-xxx4t5881vnv09_sprite1x1-21"
    }
  ],
  "mmu_item_list": [
    {
      "item_id": 6517544075,
      "score": 0.75624737
    },
    {
      "item_id": 9039903329,
      "score": 0.75413163
    },
    {
      "item_id": 9080877501,
      "score": 0.7421407
    },
    {
      "item_id": 17768856751,
      "score": 0.7413784999999999
    },
    {
      "item_id": 16538123399,
      "score": 0.74012938
    },
    {
      "item_id": 16422974644,
      "score": 0.7398663999999999
    },
    {
      "item_id": 10024920773,
      "score": 0.7391202
    },
    {
      "item_id": 2983187005,
      "score": 0.7363121
    },
    {
      "item_id": 10282792843,
      "score": 0.736138285
    },
    {
      "item_id": 12261397930,
      "score": 0.73560245
    }
  ],
  "mtime": 1677152278,
  "platform": 2,
  "play_cnt": 5868,
  "rank": 0,
  "region": 1,
  "scenario": "INS_reels",
  "scores": "{\"third_party_pdp\":0.000010948371,\"video_ppt_detect\":0.00033609892}",
  "state": 0,
  "task_id": "688",
  "vid": "CoR8abxDCnE",
  "width": 576,
  "item_list": [
    {
      "item_id": 18928606296,
      "shop_id": 48270519,
      "order_num_shopee_30d": 5279,
      "level1_global_be_category": "Women Clothes"
    },
    {
      "item_id": 18237304910,
      "shop_id": 214199461,
      "order_num_shopee_30d": 160,
      "level1_global_be_category": "Women Clothes"
    },
    {
      "item_id": 21649568526,
      "shop_id": 7263969,
      "order_num_shopee_30d": 147,
      "level1_global_be_category": "Women Clothes"
    },
    {
      "item_id": 19842866256,
      "shop_id": 9069060,
      "order_num_shopee_30d": 2710,
      "level1_global_be_category": "Women Clothes"
    },
    {
      "item_id": 20032218546,
      "shop_id": 381673651,
      "order_num_shopee_30d": 7,
      "level1_global_be_category": "Women Clothes"
    },
    {
      "item_id": 18950532754,
      "shop_id": 10221730,
      "order_num_shopee_30d": 6058,
      "level1_global_be_category": "Women Clothes"
    },
    {
      "item_id": 21074366900,
      "shop_id": 308748430,
      "order_num_shopee_30d": 3,
      "level1_global_be_category": "Women Clothes"
    },
    {
      "item_id": 14793926870,
      "shop_id": 22403521,
      "order_num_shopee_30d": 16,
      "level1_global_be_category": "Women Clothes"
    },
    {
      "item_id": 19157822939,
      "shop_id": 15311055,
      "order_num_shopee_30d": 196,
      "level1_global_be_category": "Women Clothes"
    },
    {
      "item_id": 20549875870,
      "shop_id": 185754854,
      "order_num_shopee_30d": 171,
      "level1_global_be_category": "Women Clothes"
    }
  ],
  "data_flag": "INS_reels"
}
```

æ‰€æœ‰è¾“å…¥ç«¯ kafka å­—æ®µå…¨éƒ¨é€ä¼ åˆ°è¾“å‡ºç«¯ kafkaï¼Œå¦å¤–åŠ å…¥ï¼š

1. `item_list`ï¼šè§†é¢‘åŒ¹é…åˆ°çš„å•†å“ç»“æœï¼Œå±æ€§åŒ…æ‹¬ï¼šitem_idã€shop_idã€order_num_shopee_30dã€level1_global_be_category

2. `data_flag`ï¼šæ¯å¤©è·‘çš„æµç¨‹è¯¥å­—æ®µä¸å˜ï¼Œå†…å®¹ä¸scenarioå­—æ®µç›¸åŒï¼Œå‡ä¸ºINS_reelsã€‚

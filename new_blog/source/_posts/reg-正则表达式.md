---
title: reg 正则表达式 (Python)
date: 2022-03-11 22:58:41
tags: 
- Python
- Regular Expression
- 正则表达式
categories:
- 正则表达式
password: 0418
cover: /img/reg-正则表达式/zpek00ubevoxvn458b01.webp
top_img: /img/reg-正则表达式/zpek00ubevoxvn458b01.webp
---

## 前言

我们生活与工作中常常会有这样的经历，我们想要处理一批有相似关系的邮件，或者需要置换某个文件中的所有匹配字符串，我们当然可以通过一个一个得通过搜索然后匹配处理，但更方便的，我们想要通过一些规则，或者一些规律去帮我们匹配所有相似的“邮件”或字符串，然后对其进行匹配后的批量处理。这个操作会极大得降低我们生活与工作的成本。而使用正则表达式，便是这样一种通过规则进行字符串匹配的快速且方便的方法。

这里需要注意，RE 本质上是潜入 Python 的一种 micro 的编程语言(比如 C)，通过字节码完成更快的正则匹配。但是如果表达式太复杂，可能无法正常运行，这时最好还是编写 Python 代码处理。

## 简单模式

最简单的正则表达式便是常用的字符匹配。比如 `jason` 将完全匹配字符串 `jason`。需要注意，有一些特殊的字符，它不匹配自己，而是会匹配一些特殊的东西或影响正则的其他部分，我们称之为「元字符」(metacharacters)。

### 元字符列表

完整的元字符列表如下：

```shell
. ^ $ * + ? { } [ ] \ | ()
```

接下来首先介绍这些元字符的含义

### 匹配字符

#### `[`与 `]` 字符类

`[` 与 `]`  主要用于指定一类我们希望匹配的字符 (字符类)。我们可以在中间单独列出一类我们希望匹配的字符，也可以通过给出由两个字符用 `-` 号连接来表示两个字符范围内的一系列字符。

比如：`[abc]` 表示匹配 `a`,`b`,`c` 中的任一字符，而 `[a-c]` 也表示相同的匹配规则。

需要注意，在这样的字符类中，元字符将失去元字符的含义。比如 `[ab$]`，将会匹配 `a`,`b`,`$` 三个字符，而不吧 `$` 看作特殊的元字符。

#### `^` 字符类补集

当我们希望匹配除字符类以外的字符时，可以在字符类的首字符处加上元字符 `^` ，这可以实现取补集的效果。

比如 `[^5]` 表示匹配除 `5` 以外的任一字符。

需要注意 `^` 只能插入类的首位，否则它不具有特殊含义。

#### `\` 转义符 & 预定义字符集

这个可能是最常见也是最重要的元字符。除了作为转义符外，后面跟各种不同的字符，还会指示一些特殊序列。

转义符例子 : `\\` 表示 `\`，而 `\[` 则表示 `[`

预定义字符集例子：

- `\w` 匹配任何字母与数字字符，相当于 `[a-zA-Z0-9_]` 这样的类表示。

- `\W` 匹配任何非字母与数字字符，相当于 `[^a-zA-Z0-9_]` 

- `\d` 匹配任何十进制数字，等价于 `[0-9]`

- `\D` 匹配任何非数字字符，等价于`[^0-9]`

- `\s` 匹配任何空白字符 space，等价于 `[ \t\n\r\f\v]`

- `\S` 匹配任何非空白字符，等价于 `[^ \t\n\r\f\v]`

#### `.` matchall 字符

该元字符匹配除换行符以外的任何内容，可以认为是 匹配所有的元字符。

### 重复元字符

除了能匹配不同的字符集合，正则表达式还可以指定正则的某部分可以匹配重复的次数。

#### `*`  若干次重复匹配

`*` 该元字符可以匹配某个字符的 0 次，一次，甚至多次。

比如 `ca*t`   可以匹配 `ct`(0 次)、`cat` (一次)、`caaat`(3 次)。

而 `a[bcd]*b`中的`*` 则表示可以匹配字符类 `[bcd]` 中的任意多次字符。

需要注意 `*` 的匹配方法是贪婪匹配，匹配引擎会尽可能多地重复它，如果模式的后续部分不匹配，匹配引擎再回退重复次数，并在此尝试进行匹配。

#### `+` 至少一次匹配

该元字符要求匹配的字符或字符类至少出现一次，上不封顶，不能不出现，这是 `+` 与 `*` 的唯一区别

#### `?` 最多一次匹配

该元字符要求匹配的字符或字符类可以不出现或者出现一次。

#### `{m,n}` 复杂重复匹配

这时最复杂的重复限定符，其含义实际就是限定了可重复次数的范围，下限是 `m`，上限是 `n`，从而，`*` 等价于`{0,}`， `+` 等价于 `{1,}`，`?` 等价于 `{0,1}`。一般情况下，能用前三种重复字符就用前三种重复元字符，因为其更容易阅读且更短。

## 正则表达式的使用

### 反斜杠灾难
